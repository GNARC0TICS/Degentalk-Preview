{
	"name": "@degentalk/monorepo",
	"version": "1.0.0",
	"private": true,
	"type": "module",
	"packageManager": "pnpm@9.15.0",
	"engines": {
		"node": ">=18.0.0",
		"pnpm": ">=9.0.0"
	},
	"scripts": {
		"dev": "pnpm run kill-ports && pnpm --parallel --filter @degentalk/server --filter @degentalk/client dev",
		"dev:client": "pnpm --filter @degentalk/client dev",
		"dev:server": "pnpm --filter @degentalk/server dev",
		"dev:seed": "pnpm run kill-ports && pnpm run seed:all && pnpm dev",
		"dev:quick": "pnpm run kill-ports && pnpm --parallel --filter @degentalk/server dev:quick --filter @degentalk/client dev",
		"validate:workspace": "pnpm -r exec pnpm why @degentalk/shared",
		"validate:boundaries": "node scripts/validation/validate-boundaries.cjs",
		"validate:dependencies": "node scripts/validation/validate-dependencies.cjs",
		"clean:artifacts": "find . -name 'package-lock.json' -not -path './node_modules/*' -delete",
		"build": "pnpm -r build",
		"build:client": "pnpm --filter @degentalk/client build",
		"build:server": "pnpm --filter @degentalk/server build",
		"start": "pnpm --filter @degentalk/server start",
		"test": "pnpm -r test",
		"test:e2e": "playwright test",
		"test:unit": "pnpm --filter @degentalk/client test",
		"lint": "pnpm -r lint && eslint . --ext .ts,.tsx",
		"lint:client": "pnpm --filter @degentalk/client lint",
		"lint:server": "pnpm --filter @degentalk/server lint",
		"typecheck": "pnpm -r typecheck",
		"format": "prettier --write .",
		"format:check": "prettier --check .",
		"clean": "pnpm -r exec rm -rf node_modules dist build .turbo && rm -rf node_modules",
		"install:clean": "pnpm clean && pnpm install",
		"kill-ports": "lsof -ti:5001 | xargs kill -9 2>/dev/null || echo 'Port 5001 clear' && lsof -ti:5173 | xargs kill -9 2>/dev/null || echo 'Port 5173 clear'",
		"kill-port:5001": "lsof -ti:5001 | xargs kill -9 2>/dev/null || echo 'Port 5001 clear'",
		"kill-port:5173": "lsof -ti:5173 | xargs kill -9 2>/dev/null || echo 'Port 5173 clear'",
		"db:migrate": "pnpm --filter @degentalk/db migrate",
		"db:migrate:apply": "pnpm --filter @degentalk/db migrate:apply",
		"db:studio": "pnpm --filter @degentalk/db studio",
		"db:push": "pnpm --filter @degentalk/db push",
		"db:drop": "pnpm --filter @degentalk/db drop",
		"seed:all": "pnpm --filter @degentalk/scripts seed:all",
		"seed:users": "pnpm --filter @degentalk/scripts seed:users",
		"seed:forums:only": "pnpm --filter @degentalk/scripts seed:forums:only",
		"sync:forums": "pnpm --filter @degentalk/scripts sync:forums",
		"validate": "pnpm --filter @degentalk/scripts validate",
		"validate:uuid": "tsx scripts/validation/validate-uuid-migration.ts",
		"audit:uuid": "tsx scripts/migration/generate-uuid-audit.ts",
		"generate:id-aliases": "tsx scripts/migration/generate-id-aliases.ts",
		"codemod:plan": "tsx scripts/codemods/generate-id-codemod-plan.ts",
		"codemod:dry": "tsx scripts/codemods/apply-id-codemod.ts --dry",
		"codemod:apply": "tsx scripts/codemods/apply-id-codemod.ts",
		"codemod:tsmorph:dry": "tsx scripts/codemods/apply-id-codemod-tsmorph.ts --dry",
		"codemod:tsmorph:apply": "tsx scripts/codemods/apply-id-codemod-tsmorph.ts",
		"migration:analyze": "tsx scripts/migration/analyze-codebase.ts",
		"migration:detect-ids": "tsx scripts/migration/identify-numeric-ids.ts",
		"migration:check-ids": "tsx scripts/migration/check-ids-ci.ts",
		"migration:update-baseline": "tsx scripts/migration/update-baseline.ts",
		"migration:test-baseline": "tsx scripts/migration/test-update-baseline.ts",
		"migration:forum-core:dry": "tsx scripts/migration/domain-migrations/forum-core-migration.ts",
		"migration:forum-core:live": "tsx scripts/migration/domain-migrations/forum-core-migration.ts --live",
		"migration:client-types:dry": "tsx scripts/migration/domain-migrations/client-types-migration.ts",
		"migration:client-types:live": "tsx scripts/migration/domain-migrations/client-types-migration.ts --live",
		"migration:client-api:dry": "tsx scripts/migration/domain-migrations/client-api-migration.ts",
		"migration:client-api:live": "tsx scripts/migration/domain-migrations/client-api-migration.ts --live",
		"generate:tree": "node scripts/tools/generate-tree.js",
		"prepare": "simple-git-hooks",
		"db:generate": "drizzle-kit generate --dialect postgresql --schema \"./db/schema/**/*.ts\" --out ./migrations/postgres",
		"db:migrate:dev": "pnpm run db:push && pnpm run db:studio"
	},
	"devDependencies": {
		"@paralleldrive/cuid2": "^2.2.2",
		"@types/bcryptjs": "^3.0.0",
		"@types/node": "^20.19.0",
		"@types/react": "^18.3.20",
		"@types/ws": "^8.5.13",
		"@typescript-eslint/eslint-plugin": "6.21.0",
		"@typescript-eslint/parser": "6.21.0",
		"chalk": "^5.3.0",
		"concurrently": "^8.2.2",
		"dotenv": "^16.5.0",
		"dotenv-cli": "^8.0.0",
		"drizzle-kit": "0.31.4",
		"drizzle-orm": "0.44.2",
		"eslint": "^8.57.0",
		"glob": "^10.3.10",
		"minimist": "^1.2.8",
		"prettier": "^3.5.3",
		"simple-git-hooks": "^2.12.0",
		"ts-morph": "^26.0.0",
		"ts-node": "^10.9.2",
		"tsx": "^4.19.4",
		"typescript": "5.6.3",
		"recast": "^0.23.4",
		"utility-types": "^3.10.0"
	},
	"simple-git-hooks": {
		"pre-commit": "echo \"[simple-git-hooks] Prettier formatting temporarily disabled (2025-07-01). Remove this line or revert commit to re-enable.\""
	},
	"pnpm": {
		"overrides": {
			"typescript": "5.6.3",
			"drizzle-orm": "0.44.2",
			"drizzle-kit": "0.31.4"
		},
		"peerDependencyRules": {
			"allowedVersions": {
				"react": "18",
				"react-dom": "18"
			}
		},
		"publicHoistPattern": [
			"*eslint*",
			"*prettier*",
			"@types/*",
			"typescript"
		],
		"updateConfig": {
			"ignoreDependencies": [
				"@degentalk/*"
			]
		},
		"patchedDependencies": {},
		"allowNonAppliedPatches": true,
		"packageExtensions": {
			"@degentalk/client": {
				"peerDependencies": {
					"@degentalk/shared": "workspace:*"
				}
			},
			"@degentalk/server": {
				"peerDependencies": {
					"@degentalk/shared": "workspace:*",
					"@degentalk/db": "workspace:*"
				}
			},
			"@degentalk/scripts": {
				"peerDependencies": {
					"@degentalk/shared": "workspace:*",
					"@degentalk/db": "workspace:*"
				}
			}
		},
		"dependencyRules": {
			"@degentalk/shared": {
				"allowedDependencies": [],
				"disallowedDependencies": [
					"@degentalk/*"
				]
			},
			"@degentalk/db": {
				"allowedDependencies": [
					"@degentalk/shared"
				],
				"disallowedDependencies": [
					"@degentalk/client",
					"@degentalk/server",
					"@degentalk/scripts"
				]
			},
			"@degentalk/client": {
				"allowedDependencies": [
					"@degentalk/shared"
				],
				"disallowedDependencies": [
					"@degentalk/db",
					"@degentalk/server",
					"@degentalk/scripts"
				]
			},
			"@degentalk/server": {
				"allowedDependencies": [
					"@degentalk/shared",
					"@degentalk/db"
				],
				"disallowedDependencies": [
					"@degentalk/client",
					"@degentalk/scripts"
				]
			}
		}
	}
}
