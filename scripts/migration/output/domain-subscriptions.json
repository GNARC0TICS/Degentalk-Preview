{
  "name": "subscriptions",
  "files": [
    {
      "path": "server/src/domains/subscriptions/subscription.validators.ts",
      "domain": "subscriptions",
      "subdomain": "subscription.validators.ts",
      "layer": "other",
      "size": 1861,
      "lines": 61,
      "complexity": 1,
      "dependencies": [
        "zod"
      ],
      "exports": [
        "purchaseSubscriptionSchema",
        "cancelSubscriptionSchema",
        "grantSubscriptionSchema",
        "subscriptionQuerySchema",
        "benefitKeySchema",
        "PurchaseSubscriptionRequest",
        "CancelSubscriptionRequest",
        "GrantSubscriptionRequest",
        "SubscriptionQuery",
        "BenefitKeyRequest"
      ],
      "idPatterns": [],
      "typeUsage": {
        "hasAnyTypes": false,
        "hasUnknownTypes": false,
        "hasBrandedIds": false,
        "hasNumericIds": false,
        "hasTypeGuards": false,
        "hasZodValidation": true,
        "typeImports": []
      },
      "riskLevel": "low",
      "migrationEffort": 0.19999999999999996
    },
    {
      "path": "server/src/domains/subscriptions/subscription.service.ts",
      "domain": "subscriptions",
      "subdomain": "subscription.service.ts",
      "layer": "other",
      "size": 17140,
      "lines": 610,
      "complexity": 9,
      "dependencies": [
        "@db",
        "drizzle-orm",
        "@/db/types"
      ],
      "exports": [
        "SubscriptionPurchaseRequest",
        "SubscriptionInfo",
        "CosmeticDropInfo",
        "SubscriptionService",
        "subscriptionService"
      ],
      "idPatterns": [
        {
          "type": "definition",
          "pattern": "id: number",
          "line": 29,
          "context": "id: number;",
          "suggestedFix": "check entity context for correct branded type",
          "confidence": 0.3
        }
      ],
      "typeUsage": {
        "hasAnyTypes": true,
        "hasUnknownTypes": false,
        "hasBrandedIds": false,
        "hasNumericIds": true,
        "hasTypeGuards": false,
        "hasZodValidation": true,
        "typeImports": [
          "CosmeticId",
          "ItemId",
          "SubscriptionId"
        ]
      },
      "riskLevel": "medium",
      "migrationEffort": 4.9
    },
    {
      "path": "server/src/domains/subscriptions/subscription.routes.ts",
      "domain": "subscriptions",
      "subdomain": "subscription.routes.ts",
      "layer": "routes",
      "size": 1789,
      "lines": 67,
      "complexity": 0,
      "dependencies": [
        "express"
      ],
      "exports": [],
      "idPatterns": [],
      "typeUsage": {
        "hasAnyTypes": false,
        "hasUnknownTypes": false,
        "hasBrandedIds": false,
        "hasNumericIds": false,
        "hasTypeGuards": false,
        "hasZodValidation": false,
        "typeImports": []
      },
      "riskLevel": "medium",
      "migrationEffort": 0.5
    },
    {
      "path": "server/src/domains/subscriptions/subscription.controller.ts",
      "domain": "subscriptions",
      "subdomain": "subscription.controller.ts",
      "layer": "controllers",
      "size": 8230,
      "lines": 346,
      "complexity": 5,
      "dependencies": [
        "@server/src/core/services/user.service",
        "express"
      ],
      "exports": [
        "SubscriptionController",
        "subscriptionController"
      ],
      "idPatterns": [],
      "typeUsage": {
        "hasAnyTypes": false,
        "hasUnknownTypes": false,
        "hasBrandedIds": false,
        "hasNumericIds": false,
        "hasTypeGuards": true,
        "hasZodValidation": false,
        "typeImports": [
          "Request",
          "Response"
        ]
      },
      "riskLevel": "medium",
      "migrationEffort": 0.7
    },
    {
      "path": "server/src/domains/subscriptions/subscription-permissions.service.ts",
      "domain": "subscriptions",
      "subdomain": "subscription-permissions.service.ts",
      "layer": "other",
      "size": 8085,
      "lines": 312,
      "complexity": 7,
      "dependencies": [],
      "exports": [
        "SubscriptionPermissions",
        "SubscriptionPermissionsService",
        "subscriptionPermissionsService"
      ],
      "idPatterns": [],
      "typeUsage": {
        "hasAnyTypes": true,
        "hasUnknownTypes": false,
        "hasBrandedIds": false,
        "hasNumericIds": false,
        "hasTypeGuards": false,
        "hasZodValidation": false,
        "typeImports": []
      },
      "riskLevel": "medium",
      "migrationEffort": 2.9000000000000004
    }
  ],
  "totalIssues": 1,
  "avgComplexity": 4.4,
  "migrationEffort": 9.200000000000001,
  "dependencies": [
    "@db",
    "@/db/types",
    "@server/src/core/services/user.service"
  ],
  "dependents": [],
  "criticalPath": false,
  "riskAssessment": {
    "runtime": "medium",
    "testing": "low",
    "integration": "low"
  },
  "migrationStrategy": {
    "priority": 3,
    "approach": "atomic",
    "estimatedDays": 2,
    "blockers": [],
    "prerequisites": []
  }
}